<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado</title>
    <link rel="stylesheet" href="resultado.css">
</head>
<body>
    <div id="formContainer" class="form-container"></div>
        <!-- El contenido generado se insertará aquí -->
    </div>
    
    <!-- <script src="simplex.js"></script> -->
    <!-- <script src="ingresoValores.js"></script> -->
    <script>
        window.onload = function() {

            // Obtener los datos de localStorage
            let newMatrix = JSON.parse(localStorage.getItem('newMatrix'));
            let demanda = JSON.parse(localStorage.getItem('demanda'));
            let oferta = JSON.parse(localStorage.getItem('oferta'));

            // Definir el contenedor donde se insertará la tabla
            var formContainer = document.getElementById('formContainer');

            // Crear la tabla
            let table = document.createElement('table');
            table.setAttribute('border', '1');
            let tbody = document.createElement('tbody');

            // Crear la fila de encabezado
            let headerRow = document.createElement('tr');
            let emptyCell = document.createElement('th');
            emptyCell.textContent = ''; // Célula vacía en la esquina superior izquierda
            headerRow.appendChild(emptyCell);

            // Agregar encabezados de columna para oferta
            for (let i = 0; i < oferta.length; i++) {
                let th = document.createElement('th');
                th.textContent = `W${i + 1}`; // W1, W2, W3, ...
                headerRow.appendChild(th);
            }

            // Agregar la celda RHS
            let rhsCell = document.createElement('th');
            rhsCell.textContent = 'Oferta'; // Última celda
            headerRow.appendChild(rhsCell);
            tbody.appendChild(headerRow);

            // Crear las filas de la matriz
            for (let i = 0; i < newMatrix.length; i++) {
                let row = document.createElement('tr');

                // Crear la primera célula con el índice
                let th = document.createElement('th');
                th.textContent = `F${i + 1}`; // F1, F2, F3, ...
                row.appendChild(th);

                // Añadir los valores de la matriz en esa fila
                newMatrix[i].forEach((value, j) => {
                    let td = document.createElement('td');
                    td.textContent = value;
                    row.appendChild(td);
                });

                // Añadir la celda de oferta (última celda de cada fila)
                let ofertaTd = document.createElement('td');
                ofertaTd.textContent = oferta[i] !== undefined ? oferta[i] : ''; // Asignar oferta o dejar vacío si no existe
                row.appendChild(ofertaTd);

                tbody.appendChild(row);
            }

            // Añadir la última fila para la demanda
            let demandaRow = document.createElement('tr');
            let demandaTh = document.createElement('th');
            demandaTh.textContent = 'Demanda'; // Etiqueta para la fila de demanda
            demandaRow.appendChild(demandaTh);

            // Añadir los valores de la demanda
            demanda.forEach(value => {
                let td = document.createElement('td');
                td.textContent = value;
                demandaRow.appendChild(td);
            });

            // Añadir celda de oferta para la fila de demanda
            let demandaOfertaTd = document.createElement('td');
            demandaOfertaTd.textContent = ''; // No hay oferta para la fila de demanda
            demandaRow.appendChild(demandaOfertaTd);

            // Agregar la fila de demanda al tbody
            tbody.appendChild(demandaRow);

            // Añadir el tbody a la tabla y la tabla al documento
            table.appendChild(tbody);
            formContainer.appendChild(table);

            
            // Crear un contenedor para los botones
            var buttonContainer = document.createElement('div');
            buttonContainer.className = 'button-container'; // Agregar clase para estilos

            // Crear el botón "Continuar"
            var continueButton = document.createElement('button');
            continueButton.type = 'button';
            let bandera = +localStorage.getItem("bandera");
            let nSol = +localStorage.getItem("cantidadSoluciones");
            //bandera=1;
            if (bandera == 0 || nSol ) {
                continueButton.onclick = function() {
                    inicio(1); 
                };
            } else {
                continueButton.onclick = null; 
                continueButton.disabled = true;
            }
            continueButton.textContent = 'Continuar';
            buttonContainer.appendChild(continueButton);

            // Crear el botón "Volver al inicio"
            var backButton = document.createElement('button');
            backButton.type = 'button';
            backButton.onclick = function() { window.location.href = "main.html"; };
            backButton.textContent = 'Volver al inicio';
            buttonContainer.appendChild(backButton);

            // Añadir el contenedor de botones al formContainer
            formContainer.appendChild(buttonContainer);

            
        };
    </script>
    
</body>
</html>